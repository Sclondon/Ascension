[gd_scene load_steps=22 format=3 uid="uid://bk1gddcc2roeo"]

[ext_resource type="Script" path="res://scripts/player/playerMovement.gd" id="1_s43xl"]
[ext_resource type="Texture2D" uid="uid://cd86pvye17pgw" path="res://images/frog.png" id="2_w55qo"]
[ext_resource type="Script" path="res://scripts/mainCam.gd" id="3_vkxb3"]
[ext_resource type="Material" uid="uid://cedljbkpxb41x" path="res://materials/brickwall_mat.tres" id="5_0mmkt"]
[ext_resource type="Material" uid="uid://c8foud2c0grvr" path="res://materials/brickwallsmall_mat.tres" id="5_55inp"]
[ext_resource type="Material" uid="uid://bxnxm2o0sexx4" path="res://materials/cloudmat.tres" id="7_u1pia"]
[ext_resource type="Script" path="res://scripts/tower_manager.gd" id="8_s7y8x"]
[ext_resource type="PackedScene" uid="uid://c7dntl6vclued" path="res://scenes/towerWall.tscn" id="9_2h50k"]
[ext_resource type="Script" path="res://scripts/platform_manager.gd" id="9_c2mdi"]
[ext_resource type="PackedScene" uid="uid://b5eatgtq7pnbi" path="res://scenes/basicPlatform.tscn" id="10_amj47"]

[sub_resource type="LabelSettings" id="LabelSettings_r2uiu"]
font_size = 64
font_color = Color(0.720802, 0, 0.238248, 1)

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_snqhs"]

[sub_resource type="SphereMesh" id="SphereMesh_226dk"]
material = ExtResource("7_u1pia")
radius = 1000.0

[sub_resource type="PlaneMesh" id="PlaneMesh_0tij6"]
material = ExtResource("7_u1pia")

[sub_resource type="SphereMesh" id="SphereMesh_40x86"]
radius = 0.025
height = 0.5

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_1f4mq"]
sky_top_color = Color(0.135322, 0.171193, 0.44485, 1)
sky_horizon_color = Color(0.764755, 0.325511, 0.237704, 1)
sky_curve = 0.204906
ground_bottom_color = Color(0.0374046, 0.0637393, 0.117509, 1)
ground_horizon_color = Color(0.764706, 0.32549, 0.239216, 1)
ground_curve = 0.203931

[sub_resource type="Sky" id="Sky_b61ug"]
sky_material = SubResource("ProceduralSkyMaterial_1f4mq")

[sub_resource type="Environment" id="Environment_u8v43"]
background_mode = 2
background_energy_multiplier = 1.5
sky = SubResource("Sky_b61ug")
sky_custom_fov = 141.7

[sub_resource type="SphereMesh" id="SphereMesh_xyiy8"]
material = ExtResource("7_u1pia")
radius = 100.0
height = 34.607

[sub_resource type="BoxShape3D" id="BoxShape3D_y1j0e"]
size = Vector3(9.8282, 80.0635, 1)

[sub_resource type="PlaneMesh" id="PlaneMesh_k7u2f"]
material = ExtResource("5_0mmkt")

[node name="main" type="Node3D"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer"]
offset_left = 23.0
offset_top = 52.0
offset_right = 63.0
offset_bottom = 75.0
rotation = -0.263545
scale = Vector2(0.834514, 0.686633)
label_settings = SubResource("LabelSettings_r2uiu")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.838528, 0.527971, -0.134602, -0.111711, 0.408385, 0.905948, 0.533284, -0.744626, 0.401422, 0, 5.26254, 13.8096)
shadow_blur = 9.9

[node name="Player" type="RigidBody3D" parent="." node_paths=PackedStringArray("camera", "spawnPos")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.53236, 9.41026)
lock_rotation = true
script = ExtResource("1_s43xl")
death_plane = -50
camera = NodePath("Camera3D")
spawnPos = NodePath("../SpawnPoint")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Player"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0, 0)
shape = SubResource("CapsuleShape3D_snqhs")

[node name="RayCast3D" type="RayCast3D" parent="Player"]
target_position = Vector3(0, -0.6, 0)

[node name="SpotLight3D" type="SpotLight3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 0.180056, 0.983656, 0, -0.983656, 0.180056, 0, 1.15417, 0.169193)
light_volumetric_fog_energy = 0.0
shadow_enabled = true
spot_range = 6.59514
spot_angle = 11.4286
spot_angle_attenuation = 0.164938

[node name="Sprite3D" type="Sprite3D" parent="Player"]
transform = Transform3D(3, 0, 0, 0, 3, 0, 0, 0, 1, 0.00137296, -0.301518, -0.0170275)
shaded = true
alpha_scissor_threshold = 0.639
texture_filter = 0
render_priority = 5
texture = ExtResource("2_w55qo")

[node name="Camera3D" type="Camera3D" parent="Player" node_paths=PackedStringArray("player")]
transform = Transform3D(1, 0, 0, 0, 0.918018, 0.396539, 0, -0.396539, 0.918018, 0, 1.93311, 5.29607)
fov = 55.0
near = 0.293
script = ExtResource("3_vkxb3")
player = NodePath("..")
smooth_speed = 10.0

[node name="cloudbg" type="MeshInstance3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 0.802276, -0.596953, 0, 0.596953, 0.802276, 0, -222.727, -33.4537)
mesh = SubResource("SphereMesh_226dk")
skeleton = NodePath("../..")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="Player/cloudbg"]
transform = Transform3D(-6.81467e-05, 0, 1464.27, -930.659, 0.0602495, -3.82082e-05, -1250.76, -0.0448301, -5.135e-05, 0, 146.289, -67.1516)
mesh = SubResource("PlaneMesh_0tij6")
skeleton = NodePath("../../..")

[node name="MeshInstance3D" type="MeshInstance3D" parent="Player"]
transform = Transform3D(5.45537, 0, 0, 0, 0.0137527, 0, 0, 0, 4.39519, 0, -0.426632, -0.131434)
mesh = SubResource("SphereMesh_40x86")

[node name="platform" type="CSGBox3D" parent="."]
transform = Transform3D(-0.68545, 0, -0.72812, 0, 1, 0, 0.72812, 0, -0.68545, 0.0272856, 1.34433, 6.84804)
use_collision = true
size = Vector3(5, 1, 5)
material = ExtResource("5_55inp")

[node name="SpawnPoint" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.112242, 3.21551, 10.1388)

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_u8v43")

[node name="cloudsphere" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.996112, -0.0880946, 0, 0.0880946, 0.996112, 0.483696, -20.1541, -22.9686)
mesh = SubResource("SphereMesh_xyiy8")

[node name="cloudsphere2" type="MeshInstance3D" parent="cloudsphere"]
transform = Transform3D(0.514335, 0, -0.857589, 0, 1, 0, 0.857589, 0, 0.514335, 0, -10.3564, 0)
mesh = SubResource("SphereMesh_xyiy8")
skeleton = NodePath("../..")

[node name="cloudsphere4" type="MeshInstance3D" parent="cloudsphere"]
transform = Transform3D(0.491134, -0.387851, -0.779974, -0.0818331, 0.870904, -0.484595, 0.867232, 0.301829, 0.395991, 64.5773, 8.04554, -6.93256)
mesh = SubResource("SphereMesh_xyiy8")
skeleton = NodePath("../..")

[node name="cloudsphere3" type="MeshInstance3D" parent="cloudsphere"]
transform = Transform3D(0.931964, 0, -0.362552, -0.1203, 0.943344, -0.30924, 0.342011, 0.331815, 0.879163, -1.27003, -36.159, -7.02757)
mesh = SubResource("SphereMesh_xyiy8")
skeleton = NodePath("../..")

[node name="BottomCloudLayer" type="MeshInstance3D" parent="."]
transform = Transform3D(1559.02, 0, 0, 0, 0.0750981, 0, 0, 0, 1464.27, 0, -40, 0)
mesh = SubResource("PlaneMesh_0tij6")

[node name="TowerBase" type="StaticBody3D" parent="."]
transform = Transform3D(0.49, 0, 0, 0, 0.53, 0, 0, 0, 0.453, 0, -27.544, 4)

[node name="Wall" type="CollisionShape3D" parent="TowerBase"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0274277, 30.1262, -0.197896)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/Wall"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall2" type="CollisionShape3D" parent="TowerBase"]
transform = Transform3D(0.5, 0, 0.866025, 0, 1, 0, -0.866025, 0, 0.5, 7.19567, 30.1262, -4.35032)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/Wall2"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall3" type="CollisionShape3D" parent="TowerBase"]
transform = Transform3D(0.5, 0, -0.866025, 0, 1, 0, 0.866025, 0, 0.5, -7.07347, 30.1262, -4.20853)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/Wall3"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall4" type="CollisionShape3D" parent="TowerBase"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -9.3009, 30.1262, -13.1915)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/Wall4"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall5" type="CollisionShape3D" parent="TowerBase"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.57269, 30.1262, -13.5067)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/Wall5"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="StaticBody3D" type="StaticBody3D" parent="TowerBase"]
transform = Transform3D(1.08108, 0, 0, 0, 1, 0, 0, 0, 1.16959, 0, -77.375, 1.15789)

[node name="Wall" type="CollisionShape3D" parent="TowerBase/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0274277, 30.1262, -0.197896)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D/Wall"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall2" type="CollisionShape3D" parent="TowerBase/StaticBody3D"]
transform = Transform3D(0.5, 0, 0.866025, 0, 1, 0, -0.866025, 0, 0.5, 7.19567, 30.1262, -4.35032)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D/Wall2"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall3" type="CollisionShape3D" parent="TowerBase/StaticBody3D"]
transform = Transform3D(0.5, 0, -0.866025, 0, 1, 0, 0.866025, 0, 0.5, -7.07347, 30.1262, -4.20853)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D/Wall3"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall4" type="CollisionShape3D" parent="TowerBase/StaticBody3D"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -9.3009, 30.1262, -13.1915)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D/Wall4"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall5" type="CollisionShape3D" parent="TowerBase/StaticBody3D"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.57269, 30.1262, -13.5067)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D/Wall5"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="StaticBody3D2" type="StaticBody3D" parent="TowerBase"]
transform = Transform3D(1.08108, 0, 0, 0, 1, 0, 0, 0, 1.16959, 0, -154.565, 1.15789)

[node name="Wall" type="CollisionShape3D" parent="TowerBase/StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0274277, 30.1262, -0.197896)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D2/Wall"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall2" type="CollisionShape3D" parent="TowerBase/StaticBody3D2"]
transform = Transform3D(0.5, 0, 0.866025, 0, 1, 0, -0.866025, 0, 0.5, 7.19567, 30.1262, -4.35032)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D2/Wall2"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall3" type="CollisionShape3D" parent="TowerBase/StaticBody3D2"]
transform = Transform3D(0.5, 0, -0.866025, 0, 1, 0, 0.866025, 0, 0.5, -7.07347, 30.1262, -4.20853)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D2/Wall3"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall4" type="CollisionShape3D" parent="TowerBase/StaticBody3D2"]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -9.3009, 30.1262, -13.1915)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D2/Wall4"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="Wall5" type="CollisionShape3D" parent="TowerBase/StaticBody3D2"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 9.57269, 30.1262, -13.5067)
shape = SubResource("BoxShape3D_y1j0e")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TowerBase/StaticBody3D2/Wall5"]
transform = Transform3D(5, 0, 0, 0, -4.37114e-08, -40, 0, 1, -1.74846e-06, -0.0274277, 0.0141144, 0.333698)
mesh = SubResource("PlaneMesh_k7u2f")
skeleton = NodePath("")

[node name="TowerManager" type="Node3D" parent="." node_paths=PackedStringArray("player", "platform_spawner")]
script = ExtResource("8_s7y8x")
wall_segment_scene = ExtResource("9_2h50k")
section_height = 11.0
tower_radius = 5.25
max_sections = 7
player = NodePath("../Player")
platform_spawner = NodePath("PlatformManager")

[node name="PlatformManager" type="Node3D" parent="TowerManager"]
script = ExtResource("9_c2mdi")
platform_scene = ExtResource("10_amj47")
tower_radius = 5.25
max_platforms_per_section = 100
spawn_chance = 1.0
min_distance_between_platforms = 1.0
